@{
    int count = 0;
}

@using System.Security.Claims
<div class="card">
    <div class="card-header bg-soft-success text-dark d-flex align-items-center justify-content-between">
        <div class="flex-grow-1 text-center fs-3 text-dark">
            <i class="fas fa-user-friends"></i>Kullanıcı Listesi
        </div>
        <div class="text-end">
            <a href="#" id="btnAdd" class="btn btn-success">
                <i class="uil uil-plus me-2"></i>Yeni Kayıt
            </a>
        </div>
    </div>
    <div class="card-body">
        <table id="tblUsers" class="table table-bordered table-striped table-hover"></table>
    </div>
</div>



@section Scripts {
    <script>
        $(document).ready(function () {
            let DataTable = $("#tblUsers").DataTable({
                ajax: {
                    url: '/User/GetAll',
                    dataSrc: 'data'
                },
                columns: [

                    { data: 'id', title: 'Sıra No' },
                    {
                        data: 'picture', title: 'Fotoğraf', render: function (data) {
                            return data ? `<img src="/Files/UserPhotos/${data}" style="width:50px; height:50px; border-radius:50%" />`
                                : `<div class="rounded-circle header-profile-user" style="width:50px; height:50px; background-color:#ccc; display:flex; align-items:center; justify-content:center;">
                                         <i class="fa fa-user" style="color:#fff;"></i> </div>`;
                        }
                    },
                    { data: 'email', title: 'Kullanıcı Maili' },
                    {
                        data: 'id', title: 'Rapor 1', render: function (data, type, row) {
                            return `<button onclick="deleteUser(${data}, this)" class="btn btn-danger"><i class="uil uil-trash-alt"></i></button>`;
                        }
                    },
                            {
                        data: 'id', title: 'Rapor 2', render: function (data, type, row) {
                            return `<button onclick="deleteUser(${data}, this)" class="btn btn-danger"><i class="uil uil-trash-alt"></i></button>`;
                        }
                    },
                            {
                        data: 'id', title: 'Rapor 3', render: function (data, type, row) {
                            return `<button onclick="deleteUser(${data}, this)" class="btn btn-danger"><i class="uil uil-trash-alt"></i></button>`;
                        }
                    },
                            {
                        data: 'id', title: 'Rapor 4', render: function (data, type, row) {
                            return `<button onclick="deleteUser(${data}, this)" class="btn btn-danger"><i class="uil uil-trash-alt"></i></button>`;
                        }
                    },
                ]
            });
        });
    </script>
    }
